$(document).ready(function(){function a(a,l){return new Date(l,a,0).getDate()}function l(a,l){return new Date(r,a,l).getDay()}function d(){$.each($(".row1 .dayGrid"),function(){h++,5==h&&(h=1),3!=h&&4!=h||$(this).addClass("black")}),$.each($(".row2 .dayGrid"),function(){y++,5==y&&(y=1),3!=y&&4!=y||$(this).addClass("black")}),$.each($(".row3 .dayGrid"),function(){b++,5==b&&(b=1),3!=b&&4!=b||$(this).addClass("black")}),$.each($(".row4 .dayGrid"),function(){t++,5==t&&(t=1),3!=t&&4!=t||$(this).addClass("black")})}var s=["Январь","Февраль","Март","Апрель","Ласковый Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],c=["вс","пн","вт","ср","чт","пт","сб"],i=new Date(2017,0,1),o=i.getMonth()+1,r=i.getFullYear(),h=(i.getDate(),$(".grid_days").height(),$(".grid_days").width(),a(o-1,r),0),y=3,b=2,t=1;$(".month p").append(s[o-1]);for(var n=1;n<a(o,r)+1;n++)$(".wrapDay").append('<div class="collum"><div class="dayOfWeak">'+c[l(o-1,n)]+'</div><div class="numberOfWeak">'+n+'</div><div id="one" class="row1"><div class="dayGrid"></div></div><div class="row2"><div class="dayGrid"></div></div><div class="row3"><div class="dayGrid"></div></div><div class="row4"><div class="dayGrid"></div></div></div>');d(),$("#nextMonth").click(function(i){12==o&&(r++,o=0);var n=$("body .row1 .dayGrid"),e=n[n.length-2],k=$("body .row2 .dayGrid"),w=k[k.length-2],v=$("body .row3 .dayGrid"),u=v[v.length-2],C=$("body .row4 .dayGrid"),G=C[C.length-2];!1===$("body .collum:last-child .row1 .dayGrid").hasClass("black")&&!1===$(e).hasClass("black")&&(h=2),!0===$("body .collum:last-child .row1 .dayGrid").hasClass("black")&&!1===$(e).hasClass("balck")&&(h=3),!0===$("body .collum:last-child .row1 .dayGrid").hasClass("black")&&!0===$(e).hasClass("black")&&(h=0),!1===$("body .collum:last-child .row1 .dayGrid").hasClass("black")&&!0===$(e).hasClass("black")&&(h=1),!1===$("body .collum:last-child .row2 .dayGrid").hasClass("black")&&!1===$(w).hasClass("black")&&(y=2),!0===$("body .collum:last-child .row2 .dayGrid").hasClass("black")&&!1===$(w).hasClass("balck")&&(y=3),!0===$("body .collum:last-child .row2 .dayGrid").hasClass("black")&&!0===$(w).hasClass("black")&&(y=0),!1===$("body .collum:last-child .row2 .dayGrid").hasClass("black")&&!0===$(w).hasClass("black")&&(y=1),!1===$("body .collum:last-child .row3 .dayGrid").hasClass("black")&&!1===$(u).hasClass("black")&&(b=2),!0===$("body .collum:last-child .row3 .dayGrid").hasClass("black")&&!1===$(u).hasClass("balck")&&(b=3),!0===$("body .collum:last-child .row3 .dayGrid").hasClass("black")&&!0===$(u).hasClass("black")&&(b=0),!1===$("body .collum:last-child .row3 .dayGrid").hasClass("black")&&!0===$(u).hasClass("black")&&(b=1),!1===$("body .collum:last-child .row4 .dayGrid").hasClass("black")&&!1===$(G).hasClass("black")&&(t=2),!0===$("body .collum:last-child .row4 .dayGrid").hasClass("black")&&!1===$(G).hasClass("balck")&&(t=3),!0===$("body .collum:last-child .row4 .dayGrid").hasClass("black")&&!0===$(G).hasClass("black")&&(t=0),!1===$("body .collum:last-child .row4 .dayGrid").hasClass("black")&&!0===$(G).hasClass("black")&&(t=1),i.preventDefault(),o++,$(".month p").text(s[o-1]),$(".wrapDay .collum").remove();for(var m=1;m<a(o,r)+1;m++)$(".wrapDay").append('<div class="collum"><div class="dayOfWeak">'+c[l(o-1,m)]+'</div><div class="numberOfWeak">'+m+'</div><div class="row1"><div class="dayGrid"></div></div><div class="row2"><div class="dayGrid"></div></div><div class="row3"><div class="dayGrid"></div></div><div class="row4"><div class="dayGrid"></div></div></div>');d(),console.log(r)}),$("#backMonth").click(function(d){1==o&&(r--,o=13),!1===$("body .collum:nth-child(1) .row1 .dayGrid").hasClass("black")&&!1===$("body .collum:nth-child(2) .row1 .dayGrid").hasClass("black")&&(h=2),!0===$("body .collum:nth-child(1) .row1 .dayGrid").hasClass("black")&&!1===$("body .collum:nth-child(2) .row1 .dayGrid").hasClass("black")&&(h=3),!0===$("body .collum:nth-child(1) .row1 .dayGrid").hasClass("black")&&!0===$("body .collum:nth-child(2) .row1 .dayGrid").hasClass("black")&&(h=0),!1===$("body .collum:nth-child(1) .row1 .dayGrid").hasClass("black")&&!0===$("body .collum:nth-child(2) .row1 .dayGrid").hasClass("black")&&(h=1),!1===$("body .collum:nth-child(1) .row2 .dayGrid").hasClass("black")&&!1===$("body .collum:nth-child(2) .row2 .dayGrid").hasClass("black")&&(y=2),!0===$("body .collum:nth-child(1) .row2 .dayGrid").hasClass("black")&&!1===$("body .collum:nth-child(2) .row2 .dayGrid").hasClass("black")&&(y=3),!0===$("body .collum:nth-child(1) .row2 .dayGrid").hasClass("black")&&!0===$("body .collum:nth-child(2) .row2 .dayGrid").hasClass("black")&&(y=0),!1===$("body .collum:nth-child(1) .row2 .dayGrid").hasClass("black")&&!0===$("body .collum:nth-child(2) .row2 .dayGrid").hasClass("black")&&(y=1),!1===$("body .collum:nth-child(1) .row3 .dayGrid").hasClass("black")&&!1===$("body .collum:nth-child(2) .row3 .dayGrid").hasClass("black")&&(b=2),!0===$("body .collum:nth-child(1) .row3 .dayGrid").hasClass("black")&&!1===$("body .collum:nth-child(2) .row3 .dayGrid").hasClass("black")&&(b=3),!0===$("body .collum:nth-child(1) .row3 .dayGrid").hasClass("black")&&!0===$("body .collum:nth-child(2) .row3 .dayGrid").hasClass("black")&&(b=0),!1===$("body .collum:nth-child(1) .row3 .dayGrid").hasClass("black")&&!0===$("body .collum:nth-child(2) .row3 .dayGrid").hasClass("black")&&(b=1),!1===$("body .collum:nth-child(1) .row4 .dayGrid").hasClass("black")&&!1===$("body .collum:nth-child(2) .row4 .dayGrid").hasClass("black")&&(t=2),!0===$("body .collum:nth-child(1) .row4 .dayGrid").hasClass("black")&&!1===$("body .collum:nth-child(2) .row4 .dayGrid").hasClass("black")&&(t=3),!0===$("body .collum:nth-child(1) .row4 .dayGrid").hasClass("black")&&!0===$("body .collum:nth-child(2) .row4 .dayGrid").hasClass("black")&&(t=0),!1===$("body .collum:nth-child(1) .row4 .dayGrid").hasClass("black")&&!0===$("body .collum:nth-child(2) .row4 .dayGrid").hasClass("black")&&(t=1),d.preventDefault(),o--,$(".month p").text(s[o-1]),$(".wrapDay .collum").remove();for(var i=1;i<a(o,r)+1;i++)$(".wrapDay").append('<div class="collum"><div class="dayOfWeak">'+c[l(o-1,i)]+'</div><div class="numberOfWeak">'+i+'</div><div class="row1"><div class="dayGrid"></div></div><div class="row2"><div class="dayGrid"></div></div><div class="row3"><div class="dayGrid"></div></div><div class="row4"><div class="dayGrid"></div></div></div>');$($(".row1 .dayGrid").get().reverse()).each(function(){h++,5==h&&(h=1),3!=h&&4!=h||$(this).addClass("black")}),$($(".row2 .dayGrid").get().reverse()).each(function(){y++,5==y&&(y=1),3!=y&&4!=y||$(this).addClass("black")}),$($(".row3 .dayGrid").get().reverse()).each(function(){b++,5==b&&(b=1),3!=b&&4!=b||$(this).addClass("black")}),$($(".row4 .dayGrid").get().reverse()).each(function(){t++,5==t&&(t=1),3!=t&&4!=t||$(this).addClass("black")}),console.log("Сейчас месяц "+o+" Дней в месяце по функции "+a(o,r)),console.log(r)});for(var e=new Date,k=e.getMonth(),n=0;n<k;n++)$("#nextMonth").trigger("click")});